<h2>index画面</h2>
<p>緯度経度のマップ</p>
<div id="map"></div>
<%= form_with(model: @pin, url: new_pin_path, method: :get, local: true) do |f| %>
  <div>
    <%= f.label :lat ,"緯度"%>
    <%= f.text_field :lat, id: "lat" %>
    <%= f.label :lng ,"経度"%>
    <%= f.text_field :lng, id: "lng" %>
  </div>
  <%= f.label :floor, "階数: "%>
  <%= f.number_field :floor, in: 1..10, value: 1 %>
  <%= f.select :data_type, Pin.data_types.keys.to_a,{} %>
  <%= f.submit "作成" %>
<% end %>

<table>
  <tr>
    <td>id</td>
    <td>駅番号</td>
    <td>データ</td>
    <td>緯度</td>
    <td>経度</td>
  </tr>
  <% @pins.each do |p| %>
  <tr>
    <td><%= p.id %></td>
    <td><%= p.station_id %></td>
    <td><%= p.data_type %></td>
    <td><%= p.lat %></td>
    <td><%= p.lng %></td>
    <td><%= link_to '編集', edit_pin_path(p) %></td>
    <td><%= link_to '削除', pin_path(p),method: :delete %></td>
  </tr>
  <% end %>
</table>

<script async defer
  src="https://maps.googleapis.com/maps/api/js?key=<%= ENV["GOOGLE_MAP_KEY"] %>&callback=initMap"></script>